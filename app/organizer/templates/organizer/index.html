{% extends "base.html" %}

{% block title %}大会運営ツール{% endblock title %}

{% block content %}
<div class="row">
		<div class="col-lg-10 offset-lg-1">				
				<h3 class="page-header">大会運営ツール</h3>
				<!-- Alert -->
				{% if comp_selected %}
				<div class="alert alert-info" role="alert">
						<strong>Info</strong> 運営中の競技会として「{{ comp_selected.name }}」が選択されています。
				</div>
				{% else %}
				<div class="alert alert-warning" role="alert">
						<strong>Warning!</strong> 運営する競技会が選択されていません。競技会を選択してください。
				</div>
				{% endif %}
				<!-- Main -->
				<h4>エントリー関係</h4>
				<div class="row">
						<div class="col-sm-6">
								<div class="card">
										<div class="card-block">
												<h4 class="card-title">エントリー状況確認</h4>
												<h6 class="card-subtitle mb-2 text-muted">登録されたエントリー</h6>
												<p class="card-text">エントリー状態の更新は、まずこのページで大会を選択してください.</p>
												<a href="{% url 'organizer:entry_list' %}" class="card-link">エントリー状況の確認</a>
										</div>
								</div>
						</div>
						<div class="col-sm-6">
								<div class="card">
										<div class="card-block">
												<h4 class="card-title">新規登録</h4>
												<h6 class="card-subtitle mb-2 text-muted">大会を新規</h6>
												<p class="card-text">以下のリンクより管理画面に入り、右上の「COMPを追加」をクリック</p>
												<a href="http://localhost:7000/admin/competitions/comp/" class="card-link">新規登録</a>
										</div>
								</div>
						</div>
				</div>
				<h4 class="mt-3">大会の選択</h4>
				<div class="card">
						<div class="card-block">
								<h4 class="card-title">大会一覧</h4>
								<h6 class="card-subtitle mb-2 text-muted">運営する大会を以下より選択してください。</h6>
						</div>
						<div class="card-block">
								<table class="table table-striped table-sm">
										<thead>
												<tr>
														<th>期日</th>
														<th>大会名</th>
														<th>会場</th>
														<th>主管/主催</th>
														<th>Stauts</th>
														<th>Options</th>
												</tr>
										</thead>
										<tbody>
												{% for comp in comps %}
												<tr>
														<td>{{ comp.date }}</td>
														<td style="white-space:nowrap;">
																<h5>{{ comp.name }}</h5>
																<p class="text-muted">[大会コード: {{ comp.code }}]</p>
														</td>
														<td>{{ comp.place }}</td>
														<td>
																<h6><small class="text-muted">主管:</small><br>{{ comp.sponsor }}</h6>
																<h6><small class="text-muted">主催:</small><br>{{ comp.organizer }}</h6>
														</td>
														<td>{{ comp.status }}</td>
														<td>
																{% if request.session.comp_code  == comp.code %}
																<a href="{% url 'organizer:select_comp'  comp_code=comp.code %}" class="btn btn-primary btn-sm disabled mx-1 my-1">この大会を選択</a>
																{% else %}
																<a href="{% url 'organizer:select_comp'  comp_code=comp.code %}" class="btn btn-primary btn-sm mx-1 my-1">この大会を選択</a>
																{% endif %}

																{% if request.session.comp_code  == comp.code %}
																<a href="{% url 'competitions:event_status_list'  comp_code=comp.code %}" class="btn btn-secondary btn-sm mx-1 my-1">競技種目一覧</a>
																<a href="{% url 'organizer:entry_list' %}" class="btn btn-secondary btn-sm mx-1 my-1">Entry Manager</a>
																<a href="{% url 'organizer:sl_top' %}" class="btn btn-secondary btn-sm mx-1 my-1">スタートリスト</a>
																{% endif %}

														</td>
												</tr>
												{% endfor %}
										</tbody>
								</table>
						</div>
						<div class="card-footer text-muted">
								2 days ago
						</div>
				</div>	

		</div>
</div>
{% endblock content %}
